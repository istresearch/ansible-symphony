datadog_monitors:
  supervisord:
    enabled: true
    is_custom_check: false
    server_name: '{{ inventory_hostname }}'
  es_doc_count:
    enabled: true
    is_custom_check: true
    es_instances:
      - user: '{{ traptor_ist_es.user }}'
        password: '{{ traptor_ist_es.password }}'
        host: '{{ traptor_ist_es.host }}'
        port: '{{ traptor_ist_es.port }}'
        doctypes:
          -  doc_type: tweet_traptor
             index: pulse-default-default
             metric_name: tweet_traptor.track.track0.count
             timestamp_field: system_timestamp
             query:
               bool:
                 must:
                  - match:
                      doc.traptor.rule_type: track
                  - match:
                      doc.traptor.id: 0
          -  doc_type: tweet_traptor
             index: pulse-default-default
             metric_name: tweet_traptor.track.track1.count
             timestamp_field: system_timestamp
             query:
               bool:
                 must:
                  - match:
                      doc.traptor.rule_type: track
                  - match:
                      doc.traptor.id: 1
            -  doc_type: tweet_traptor
                index: pulse-default-default
                metric_name: tweet_traptor.track.track1.count
                timestamp_field: system_timestamp
                query:
                  bool:
                    must:
                     - match:
                         doc.traptor.rule_type: track
                     - match:
                         doc.traptor.id: 2
