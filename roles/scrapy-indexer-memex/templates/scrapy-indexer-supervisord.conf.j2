[program:{{ indexer_name }}]
command={{ miniconda_install_dir|default('/opt/miniconda') }}/bin/scrapy runspider crawling/spiders/indexer_spider.py -a id=%(process_num)02d
directory= {{ indexer_install_dir }}
autostart=true
autorestart=true
process_name=%(process_num)02d
numprocs={{ indexer_parallelism }}
startsecs={{ indexer_start_secs }}
startretries={{ indexer_start_retries }}
stopsignal=KILL
redirect_stderr=true
stdout_logfile=AUTO
stdout_logfile_maxbytes={{ indexer_stdout_logfile_maxbytes }}
stderr_logfile=AUTO
stderr_logfile_maxbytes={{ indexer_stderr_logfile_maxbytes }}
{% if proxy_url is defined and proxy_port is defined %}
environment = http_proxy="{{ proxy_url }}:{{ proxy_port }}", https_proxy="{{ proxy_url }}:{{ proxy_port }}"
{% endif %}
